{"ast":null,"code":"var _jsxFileName = \"/Users/ivan/Desktop/react-node-globalsoft/client/src/services/MovieContext.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { createContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { setItem } from \"./cacheService\";\n\n//kreiranje contexta\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MovieContext = /*#__PURE__*/createContext();\n//localstorage favorites\nconst savedLocalStorage = JSON.parse(localStorage.getItem(\"favorites\") || \"[]\");\nexport function MovieProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const FAVORITES_MOVIES_CACHE_STORAGE_KEY = \"favorites\";\n  const url = \"http://localhost:8000/moviesss\";\n  const [favorites, setFavorites] = useState(savedLocalStorage);\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState(\"\");\n\n  //localstorage favorites\n  useEffect(() => {\n    setItem(FAVORITES_MOVIES_CACHE_STORAGE_KEY, JSON.stringify(favorites));\n  }, [favorites]);\n\n  //Fetch from api\n  let getMovies = () => {\n    axios.get(url).then(res => {\n      console.log(res.data);\n      setMovies(res.data);\n      setLoading(false);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n  useEffect(() => {\n    getMovies();\n  }, []);\n  const handleFavorites = item => {\n    if (!favorites.some(favorites => favorites.id === item.id)) {\n      setFavorites(favorites => [...favorites, item]);\n    } else {\n      setFavorites(favorites => favorites.filter(favorites => favorites.id !== item.id));\n    }\n  };\n  const handleSearch = e => {\n    if (!e) return;\n    e.preventDefault();\n    setSearch(e.target.value);\n  };\n  const searchmovies = movies.filter(item => {\n    return item.movie.toLowerCase().includes(search.toLowerCase());\n  });\n  console.log(movies);\n  return /*#__PURE__*/_jsxDEV(MovieContext.Provider, {\n    value: {\n      loading,\n      setLoading,\n      movies,\n      setMovies,\n      favorites,\n      setFavorites,\n      handleSearch,\n      searchmovies,\n      getMovies,\n      handleFavorites\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n//export contexta\n_s(MovieProvider, \"NP++hVVIYWpPt9OLYibUDYvrxUc=\");\n_c = MovieProvider;\nexport default MovieContext;\nvar _c;\n$RefreshReg$(_c, \"MovieProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","useEffect","setItem","jsxDEV","_jsxDEV","MovieContext","savedLocalStorage","JSON","parse","localStorage","getItem","MovieProvider","_ref","_s","children","FAVORITES_MOVIES_CACHE_STORAGE_KEY","url","favorites","setFavorites","movies","setMovies","loading","setLoading","search","setSearch","stringify","getMovies","get","then","res","console","log","data","catch","error","handleFavorites","item","some","id","filter","handleSearch","e","preventDefault","target","value","searchmovies","movie","toLowerCase","includes","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ivan/Desktop/react-node-globalsoft/client/src/services/MovieContext.js"],"sourcesContent":["import React from \"react\";\nimport { createContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { setItem } from \"./cacheService\";\n\n//kreiranje contexta\nconst MovieContext = createContext();\n//localstorage favorites\nconst savedLocalStorage = JSON.parse(localStorage.getItem(\"favorites\") || \"[]\");\n\nexport function MovieProvider({ children }) {\n  const FAVORITES_MOVIES_CACHE_STORAGE_KEY = \"favorites\";\n\n  const url = \"http://localhost:8000/moviesss\";\n  const [favorites, setFavorites] = useState(savedLocalStorage);\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState(\"\");\n\n\n\n  //localstorage favorites\n  useEffect(() => {\n    setItem(FAVORITES_MOVIES_CACHE_STORAGE_KEY, JSON.stringify(favorites));\n  }, [favorites]);\n\n  //Fetch from api\n  let getMovies = () => {\n    axios\n      .get(url)\n      .then((res) => {\n        console.log(res.data);\n        setMovies(res.data);\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n  useEffect(() => {\n    getMovies();\n  }, []);\n\n  const handleFavorites=(item)=>{\n    if (!favorites.some((favorites) => favorites.id === item.id)) {\n      setFavorites((favorites) => [...favorites, item]);\n\n    }else{\n      setFavorites((favorites) =>\n      favorites.filter((favorites) => favorites.id !== item.id)\n    );\n    }\n  }\n\n\n  \n\n\n  \n\n  const handleSearch = (e) => {\n    if (!e) return;\n    e.preventDefault();\n    setSearch(e.target.value);\n  };\n  const searchmovies = movies.filter((item) => {\n    return item.movie.toLowerCase().includes(search.toLowerCase());\n  });\n\n  \n\nconsole.log(movies)\n\n\n\n  return (\n    <MovieContext.Provider\n      value={{\n        loading,\n        setLoading,\n        movies,\n        setMovies,\n        favorites,\n        setFavorites,\n        \n        \n        \n        handleSearch,\n        searchmovies,\n        getMovies,\n        handleFavorites\n        \n      }}\n    >\n      {children}\n    </MovieContext.Provider>\n  );\n}\n\n//export contexta\nexport default MovieContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}